<div class="alert alert-success alert-dismissible fade show" role="alert"  [hidden]="!successMessage">
     {{successMessage}}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
</div>

<div class="container pt-5">
    <div class="row">
        <div class="col-md-8">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead class="thead-light">
                        <tr>
                            <th scope="col">S. No</th>
                            <th scope="col">Project Id</th>
                            <th scope="col">Project Title</th>
                            <th scope="col">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let project of projects; index as i" routerLink="/project/{{project.projectId}}">
                            <th scope="row">{{i+1}}</th>
                            <td>{{project.projectId}}</td>
                            <td>{{project.projectTitle}}</td>
                            <td>{{project.status}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card">
                <div class="card-header">
                    Basic profile
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <div class="row">
                            <div class="col-md-4">
                                <img src="../../../../assets/image/avatar.png" class="card-img-top" alt="avatar">
                            </div>
                            <div class="col-md-8">
                                <h6 class="card-title">{{userName}}</h6>
                                <small class="card-text text-muted">{{userId}}</small>
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item">
                        <h5>
                            <small>
                                Designation
                                <span class="float-right card-title text-capitalize">{{designation}}</span>
                            </small>
                        </h5>
                    </li>
                    <li class="list-group-item">
                        <h5>
                            <small>
                                Department
                                <span class="float-right card-title">{{departmentId}}</span>
                            </small>
                        </h5>
                    </li>
                </ul>
            </div>

            <div class="card mt-5">
                <div class="card-header">
                    Contribution
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <h5><small>Department projects
                                <span class="float-right badge badge-pill badge-warning p-2">{{1}}</span>
                            </small>
                        </h5>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="fixed-bottom">
        <button class="btn btn-primary float-right mb-5 mr-5" data-toggle="modal" data-target="#newProjectModal">
            + New Project
        </button>
    </div>

    <div class="modal fade" id="newProjectModal" tabindex="-1" role="dialog" aria-labelledby="newProjectModal"
        aria-hidden="closeModal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Create New Project</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-danger text-center" [hidden]="!formSubmitError"> {{formSubmitError}}</div>
                    <form #projectForm="ngForm">
                        <div class="form-group">
                            <label for="projectTitle">Project Title</label>
                            <input type="text" class="form-control" id="projectTitle" name="projectTitle" ngModel>
                        </div>
                        <div class="form-group">
                            <label for="projectSummary">Project summary</label>
                            <textarea type="text" class="form-control" id="projectSummary" name="projectSummary" rows="3" ngModel></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="department">Department</label>
                                <select  type="text" class="form-control" id="department" name="department" (change)="getLabs(projectForm.value.department)" ngModel>
                                    <option *ngFor="let dept of departments" [value]="dept.departmentId">{{dept.departmentName}}</option>
                                </select>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="lab">Lab</label>
                                <select type="text" class="form-control" id="lab" name="lab" ngModel>
                                    <option *ngFor="let lab of researchLabs" [value]="lab.researchLabId">{{lab.researchLabName}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="contributors">Contributors </label>
                                <div>
                                    <span *ngFor="let people of team" class="badge badge-pill badge-secondary pr-1">{{people}}
                                        <span (click)="removePeople(people)" class="c-pointer">X</span>
                                    </span> 
                                </div>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="seacrchContributors">Search userId</label>
                                <div class="input-group">
                                    <input list="users" 
                                            type="text" 
                                            class="form-control" 
                                            id="seacrchContributors" 
                                            name="people" 
                                            [(ngModel)]="people" 
                                            autocomplete="off" 
                                            (keyup)="getContributor(projectForm.value.people)">
                                    <datalist id="users">
                                        <option *ngFor="let contributor of contributorsId" [value]="contributor" (click)="clearDataList()">{{contributor}}</option>
                                    </datalist>
                                    <div class="input-group-append">
                                        <button type="button" class="btn btn-secondary" (click)="addContributor(projectForm.value.people)">Add</button>
                                    </div>
                                </div> 
                            </div>
                        </div>
                    
               
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" (click)="createProject(projectForm.value)">Create Project</button>
                </div>
            </form>
        </div>
            </div>
        </div>
    </div>
</div>